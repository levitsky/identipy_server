{% extends "base.html" %}
{% block title %}Uploaded data{% endblock%}
{% block content %}
		<!-- List of uploaded documents -->
        <div id="index">
        Welcome {{ user.username }} (<a href="/logout">logout</a>)
		{% if documents %}
			<table id="document_list">
                <tr id="headings">
                    <th>Filename</th>
                    <th>Size</th>
                    <th>Submit date</th>
                </tr>
			{% for doc in documents %}
            <tr>
                <td><a class="entry" href="{% url 'datasets:details' doc.id %}">{{ doc.name }}</a></td>
                <td>{{ doc.docfile.size | filesizeformat }}</td>
                <td>{{ doc.date_added }}</td>
            </tr>
			{% endfor %}
			</table>
		{% else %}
			<p>There is no uploaded data.</p>
		{% endif %}
        </div>

        <div id="index_spectra">
		{% if chosenspectra %}
			<table id="spectra_list">
                Choosen spectra:
                <tr id="spectraheadings">
                    <th>Filename</th>
                    <th>Size</th>
                    <th>Submit date</th>
                </tr>
			{% for doc in chosenspectra %}
            <tr>
                <td><a class="entry" href="{% url 'datasets:details' doc.id %}">{{ doc.name }}</a></td>
                <td>{{ doc.docfile.size | filesizeformat }}</td>
                <td>{{ doc.date_added }}</td>
            </tr>
			{% endfor %}
			</table>
		{% else %}
			<p>Spectra files are not selected.</p>
		{% endif %}
        </div>

        <div id="index_fasta">
		{% if chosenfasta %}
			<table id="fasta_list">
                Choosen fasta:
                <tr id="fastaheadings">
                    <th>Filename</th>
                    <th>Size</th>
                    <th>Submit date</th>
                </tr>
			{% for doc in chosenfasta %}
            <tr>
                <td><a class="entry" href="{% url 'datasets:details' doc.id %}">{{ doc.name }}</a></td>
                <td>{{ doc.docfile.size | filesizeformat }}</td>
                <td>{{ doc.date_added }}</td>
            </tr>
			{% endfor %}
			</table>
		{% else %}
			<p>Fasta file is not selected.</p>
		{% endif %}
        </div>

        <div id="index_params">
		{% if chosenparams %}
			<table id="params_list">
                Choosen params:
                <tr id="paramsheadings">
                    <th>Filename</th>
                    <th>Size</th>
                    <th>Submit date</th>
                </tr>
			{% for doc in chosenparams %}
            <tr>
                <td><a class="entry" href="{% url 'datasets:details' doc.id %}">{{ doc.name }}</a></td>
                <td>{{ doc.docfile.size | filesizeformat }}</td>
                <td>{{ doc.date_added }}</td>
            </tr>
			{% endfor %}
			</table>
		{% else %}
			<p>Params file is not selected.</p>
		{% endif %}
        </div>


        <div id="upload">
		<form action="{% url 'datasets:index' %}" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<p>{{ spectraform.non_field_errors }}</p>
			<p>{{ spectraform.spectrafile.label_tag }} {{ spectraform.spectrafile.help_text }}</p>
			<p>
				<!--{{ spectraform.spectrafile.errors }}-->
				{{ spectraform.spectrafile }}
			</p>
			<p><input type="submit" value="Upload" /></p>
		</form>
        <form action="#" method="get">
         <input type="submit" class="btn" value="Choose preloaded spectra" name="uploadspectra">
        </form>
        </div>

        <div id="upload_fasta">
		<form action="{% url 'datasets:index' %}" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<p>{{ fastaform.non_field_errors }}</p>
			<p>{{ fastaform.fastafile.label_tag }} {{ fastaform.fastafile.help_text }}</p>
			<p>
				<!--{{ fastaform.spectrafile.errors }}-->
				{{ fastaform.fastafile }}
			</p>
			<p><input type="submit" value="Upload" /></p>
		</form>
        <form action="#" method="get">
         <input type="submit" class="btn" value="Choose preloaded fasta" name="uploadfasta">
        </form>
        </div>

        <div id="upload_parameters">
		<form action="{% url 'datasets:index' %}" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<p>{{ paramsform.non_field_errors }}</p>
			<p>{{ paramsform.paramsfile.label_tag }} {{ paramsform.paramsfile.help_text }}</p>
			<p>
				<!--{{ fastaform.spectrafile.errors }}-->
				{{ paramsform.paramsfile }}
			</p>
            <p><input type="submit" value="Upload" /></p>
		</form>
        <form action="#" method="get">
         <input type="submit" class="btn" value="Choose preloaded parameters" name="uploadparams">
        </form>
        </div>

        <br>
        <!--<div id="upload_but">-->
			<!--{% csrf_token %}-->
		    <!--<form action="{% url 'datasets:index' %}" method="post" enctype="multipart/form-data">-->
		    <!--</form>-->
        <!--</div>-->

        <br>
        <div id="run_identipy">
        <form action="#" method="get">
         <input type="text" value="Enter search run name" name="runname" size="20"/>
         <input type="submit" class="btn" value="RUN identipy" name="runidentipy">
        </form>
        </div>
        </br>

        <div id="identipy message">
		{% if identipymessage %}
            {{ identipymessage }}
		{% endif %}
        </div>

        <br>
        <div id="clear">
        <form action="#" method="get">
         <input type="submit" class="btn" value="clear" name="clear">
        </form>
        </div>
        </br>

        <br>
        <div id="get_status">
        <form action="#" method="get">
         <input type="submit" class="btn" value="getstatus" name="getstatus">
        </form>
        </div>
        </br>
{% endblock %}
