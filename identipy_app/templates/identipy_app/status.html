{% extends "base.html" %}
{% block title %}Search History{% endblock%}
{% block content %}
{% load stringfilter %}


{% if processes %}
<div class="vert_block">
    <form action="{% url 'identipy_app:form_dispatch' %}" method="POST">{% csrf_token %}
        Page {{ res_page }} of {{ max_res_page  }}
        {% if search_run_filter %}
        <input type="text" id="searchinput" name="search_button" value={{ search_run_filter|spacify }}  placeholder="Enter run name"/>
        {% else %}
        <input type="text" id="searchinput" name="search_button" value=""  placeholder="Enter run name"/>
		{% endif %}
        <input type="submit" class="link" value="Search previous runs by name" name="submit_action"/>
    </form>
</div>
<div class="vert_block">
        
        {% if res_page != max_res_page %}
        
        <a id="prev" class="btn" href="{% url 'identipy_app:getstatus' %}?res_page=+1" name="prev_runs">older runs >></a>
        {% endif %}

        {% if res_page != 1 %}
        
        <a id="newer" class="btn" href="{% url 'identipy_app:getstatus' %}?res_page=-1" name="next_runs"><< newer runs</a>
 
            
		{% endif %}
</div>
<form action="{% url 'identipy_app:delete_search' %}" method="post">{% csrf_token %}
	<table type="bordered" id="processes_list">
        <tr id="headers">
            <th><input type="submit" class="btn red" value="Delete" name="submit_action"/></th>
            <th>Search name</th>
            <th>Search date</th>
            <th>Status</th>
        </tr>
	{% for doc in processes %}
    <tr>
        <td class="td1" style="width:2em"><input type="checkbox" name={{ doc.name|spacify }}></td>
        <td class="td1" style="word-break:break-all"><a class="link" href={% url "identipy_app:details" doc.id %}>{{ doc.name|spacify }}</a></td>
        <td class="td1" style="width:20em">{{ doc.date_added }}</td>
        <td class="td3" style="width:20em">{{ doc.status }}</td>
    </tr>
	{% endfor %}
	</table>
</form>
{% else %}
<h2><p>There are no searches</p></h2>
{% endif %}
<div id="status_back" class="centered"><a class="backbtn" href="{% url 'identipy_app:searchpage' %}">Start a new search run</a></div>


{% endblock %}
